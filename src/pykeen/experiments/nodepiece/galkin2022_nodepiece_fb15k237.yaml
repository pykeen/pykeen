metadata:
  title: Learn FB15k-237 Dataset with NodePiece + RotatE as described by Galkin et al., 2022
pipeline:
  dataset: fb15k237
  evaluator_kwargs:
    filtered: true
  loss: BCELoss
  model: NodePiece
  model_kwargs:
    entity_initializer: xavier_uniform_
    relation_initializer: init_phases
    relation_constrainer: complex_normalize
    embedding_dim: 200   # for both anchors and relations
    interaction: RotatEInteraction
    aggregation: mlp
    tokenizers: ['AnchorTokenizer', 'RelationTokenizer']
    num_tokens: [20, 15]  # 20 anchors, 15 relations
    tokenizers_kwargs:
      [{
         selection: MixtureAnchorSelection
         searcher: CSGraphAnchorSearcher
         selection_kwargs:
           selections: ['Degree', 'PageRank', 'Random']
           ratios: [0.4, 0.4, 0.2]
           num_anchors: 1000
      },
       {}  # no params for RelationTokenizer
      ]

  optimizer: Adam
  optimizer_kwargs:
    lr: 0.0005
  training_kwargs:
    batch_size: 512
    num_epochs: 401
    label_smoothing: 0.4
  training_loop: LCWA
results:
  hits_at_k:
    best:
      '10': 0.421  # line in paper: no anchor distances
  mean_reciprocal_rank:
    best: 0.254
